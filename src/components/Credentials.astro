---
// src/components/FeaturedCredentials.astro
import { certifications, achievements } from '../data/credentials';

// Filter untuk mendapatkan hanya item yang "featured"
const featuredCertifications = certifications.filter(cert => cert.featured);
const featuredAchievements = achievements.filter(ach => ach.featured);

// Gabungkan dan petakan ke struktur data yang seragam untuk ditampilkan
const featuredItems = [
  ...featuredCertifications.map(cert => ({
    id: cert.id,
    title: cert.name,
    description: cert.description,
    image: cert.logo,
    category: cert.category,
    tags: cert.skills,
    url: `/credentials#${cert.id}`,
    type: 'Certification'
  })),
  ...featuredAchievements.map(ach => ({
    id: ach.id,
    title: ach.title,
    description: ach.description,
    image: ach.image,
    category: ach.category,
    tags: ach.details.slice(0, 3), // Ambil beberapa detail sebagai tag
    url: `/credentials#${ach.id}`,
    type: 'Achievement'
  }))
];
---

<section id="credentials" class="py-20">
  <div class="container mx-auto px-6">
    <div class="max-w-6xl mx-auto">
      <h2 class="text-4xl md:text-5xl font-bold text-center mb-16">
        <span class="gradient-text">Credentials</span>
      </h2>
      
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {featuredItems.map((item, index) => (
          <div 
            class="glass-effect rounded-2xl overflow-hidden transition-all duration-500 group"
            data-aos="fade-up"
            data-aos-delay={index * 100}
          >
            <div class="relative overflow-hidden">
              <img 
                src={item.image} 
                alt={item.title}
                class="w-full h-48 object-cover group-hover:scale-110 transition-all duration-700 ease-out"
              />
              <div class="absolute top-4 right-4">
                <span class={`px-3 py-1 rounded-full text-xs font-medium ${
                  item.type === 'Certification' ? 'bg-primary-500 text-white' : 'bg-success-500 text-white'
                } breathing`}>
                  {item.type.toUpperCase()}
                </span>
              </div>
              <div class="absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
              <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-primary-500 to-accent-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-700 origin-left"></div>
            </div>
            
            <div class="p-6 flex flex-col h-full">
              <h3 class="text-xl font-semibold mb-3 group-hover:text-primary-400 transition-colors">
                {item.title}
              </h3>
              <p class="text-dark-300 mb-4 text-sm leading-relaxed flex-grow">
                {item.description.length > 120 ? `${item.description.substring(0, 120)}...` : item.description}
              </p>
              
              <div class="flex flex-wrap gap-2 mb-4">
                {item.tags.slice(0, 3).map((tag) => (
                  <span class="bg-dark-700 text-xs px-2 py-1 rounded-full text-dark-300">
                    {tag}
                  </span>
                ))}
              </div>
              
              <div class="mt-auto pt-4">
                <a 
                  href={item.url} 
                  class="text-primary-400 hover:text-primary-300 font-medium text-sm transition-all duration-300 hover:translate-x-2"
                >
                  View Details â†’
                </a>
              </div>
            </div>
          </div>
        ))}
      </div>
      
      <div class="text-center mt-12">
        <a 
          href="/credentials" 
          class="inline-flex items-center space-x-2 bg-primary-600 hover:bg-primary-500 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-primary-500/25 breathing"
        >
          <span>View All Credentials</span>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </a>
      </div>
    </div>
  </div>
</section>